parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Focm":[function(require,module,exports) {
var global = arguments[3];
var n,t=arguments[3];function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function e(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function i(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}function u(n,t){return c(n)||a(n,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(n,t){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n)){var r=[],e=!0,i=!1,u=void 0;try{for(var o,a=n[Symbol.iterator]();!(e=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);e=!0);}catch(c){i=!0,u=c}finally{try{e||null==a.return||a.return()}finally{if(i)throw u}}return r}}function c(n){if(Array.isArray(n))return n}function f(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),r.push.apply(r,e)}return r}function s(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(r,!0).forEach(function(t){l(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):f(r).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function l(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function h(n){return v(n)||g(n)||p()}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}function v(n){if(Array.isArray(n)){for(var t=0,r=new Array(n.length);t<n.length;t++)r[t]=n[t];return r}}var b=function(n,t){return n.reduce(function(n,r){return n[n.length-1].length<t?[].concat(h(n.slice(0,-1)),[[].concat(h(n[n.length-1]),[r])]):[].concat(h(n),[[r]])},[[]])},w=function(n){return n.reduce(function(n,t){return t in n?n[t]+=1:n[t]=1,n},{})},P=function(n){return n.reduce(function(n,t){return n.find(function(n){return n===t})?n:[].concat(h(n),[t])},[])},y=function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t===r?[t]:(e||(e=t<r?1:-1),t>r&&e>0?[]:t<r&&e<0?[]:[t].concat(h(n(t+e,r,e))))},d=y(0,63),k=/(?:(^0-0-0|^O-O-O)|(^0-0|^O-O)|(?:^([a-h])(?:([1-8])|(?:x([a-h][1-8])))(?:=?([NBRQ]))?)|(?:^([NBRQK])([a-h])?([1-8])?(x)?([a-h][1-8])))(?:(\+)|(#)|(\+\+))?$/,_=/^\s*\[\s*(.+?)\s+"(.+?)"\s*\]\s*$/,m="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",q="rnbqkbnr/pp1ppppp/8/2p5/4P3/8/PPPP1PPP/RNBQKBNR w KQkq c6 0 1",R="rnbqkbnr/ppp1pppp/8/3p4/4P3/8/PPPP1PPP/RNBQKBNR w KQkq d6 0 2",K="rnbqkbnr/ppp2ppp/4p3/3pP3/8/8/PPPP1PPP/RNBQKBNR w KQkq d6 0 3",O="rnb1kbnr/pppp1ppp/8/4p3/6Pq/5P2/PPPPP2P/RNBQKBNR w KQkq - 1 3",Q="r1bqnNnr/pppkpp1p/7R/3p4/8/8/PPPPPPP1/RNBQKBN1 b Q - 0 6",B="r1bqkb1r/pppp1ppp/2n2n2/4p2Q/2B1P3/8/PPPP1PPP/RNB1K1NR w KQkq - 4 4",A="r1bqkb1r/pppp1Qpp/2n2n2/4p3/2B1P3/8/PPPP1PPP/RNB1K1NR b KQkq - 0 4",C="rnbqk2r/pppp1ppp/5n2/2b1p3/2B1P3/5N2/PPPP1PPP/RNBQK2R w KQkq - 4 4",S="rnbqk2r/pppp1ppp/5n2/2b1p3/2B1P3/5N2/PPPP1PPP/RNBQ1RK1 b kq - 5 4",N="7k/7P/7K/8/8/8/8/8 w - - 0 1",F="R6k/6pp/8/8/3n4/8/8/7K b - - 0 1",M="R6k/6pp/8/8/3r4/8/8/7K b - - 0 1",j="R6k/6qp/5B2/8/8/8/8/7K b - - 0 1",T="8/6B1/6p1/R6k/7p/8/8/K5R1 b KQkq - 0 1",x="8/5BB1/6p1/R6k/7p/8/8/K5R1 b KQkq - 0 1",L=function(n){var t=n.split(/\s+/);return{fenString:t[0],turn:t[1],castling:t[2],enPassant:t[3],halfMoveClock:t[4],fullMoveNumber:t[5],fenArray:$(t[0])}},E=function(n){return delete n.fenArray,values(n).join(" ")},D=function(n){return n.replace(/\//g,"").replace(/[1-8]/g,function(n){return"0".repeat(parseInt(n))})},I=function(n){return n.replace(/(.{8})(?!$)/g,"$1/").replace(/0+/g,function(n){return n.length.toString()})},$=function(n){if(/^(.+\/){7}.+$/.test(n))n=D(n);else if(64!==n.length)return[];return n.split("").map(function(n,t,r){return r[56^t]})},U=$(L(m).fenString),z=function(n){return I(n.map(function(t,r){return n[56^r]}).join(""))},W=z(U),X=function(n){return n>=0&&n<64?"".concat(String.fromCharCode(97+V(n))).concat(String.fromCharCode(49+J(n))):"-"},G=function(n){return/[a-h][1-8]/.test(n)?tn(n.charCodeAt(1)-49,n.charCodeAt(0)-97):-1},H=function(n){return isNaN(n)?G(n):parseInt(n)},J=function(n){return Math.floor(H(n)/8)},V=function(n){return H(n)%8},Y=function(n){return String.fromCharCode(97+n)},Z=function(n){return n.charCodeAt(0)-97},nn=function(n){return{row:J(n),col:V(n)}},tn=function(n,t){return 8*n+t},rn=function(n){return/[pnbrqk]/.test(n)},en=function(n){return/[PNBRQK]/.test(n)},un=function(n){return"0"===n},on=function(n){return"String"===n.constructor.name&&(n=G(n)),J(n)%2==0&&V(n)%2==0||J(n)%2!=0&&V(n)%2!=0},an=function(n){return!on(n)},cn=function(n,t){return Math.abs(J(n)-J(t))},fn=function(n,t){return Math.abs(V(n)-V(t))},sn=function(n,t){return 0===cn(n,t)},ln=function(n,t){return 0===fn(n,t)},hn=function(n,t){return fn(n,t)===cn(n,t)},pn=function(n,t){return fn(n,t)===cn(n,t)&&Math.abs(H(n)-H(t))%7==0&&63!==H(n)&&63!==H(t)},gn=function(n,t){return 2===fn(n,t)&&1===cn(n,t)||1===fn(n,t)&&2===cn(n,t)},vn=function(n,t){return fn(n,t)<2&&cn(n,t)<2},bn=1,wn=8,Pn=9,yn=7,dn=function(n,t){var r;if(n===t)return[H(n)];if(ln(n,t))r=H(n)<H(t)?wn:-wn;else if(sn(n,t))r=H(n)<H(t)?bn:-bn;else if(pn(n,t))r=H(n)<H(t)?yn:-yn;else{if(!hn(n,t))return gn(n,t)?[H(n),H(t)]:[];r=H(n)<H(t)?Pn:-Pn}return y(H(n),H(t),r)},kn=function(n){return n.slice(1,-1)},_n=function(n,t,r){return rn(n)?J(t)>J(r):J(t)<J(r)},mn=function(n){return"Array"===n.constructor.name?n:"String"!==n.constructor.name?[]:/\s+/.test(n)?L(n).fenArray:$(n)},qn=function(n,t){return mn(n).findIndex(function(n){return n===(/[a-z]/.test(t)&&"w"!==t?"k":"K")})},Rn=function(n,t){if(t.length<3)return!0;var r=mn(n),e=kn(t),i=!0,u=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){if("0"!==r[a.value])return!1}}catch(f){u=!0,o=f}finally{try{i||null==c.return||c.return()}finally{if(u)throw o}}return!0},Kn=function(n,t){return hn(n,t)&&n!==t},On=function(n,t){return(sn(n,t)||ln(n,t))&&n!==t},Qn=function(n,t){return(Kn(n,t)||On(n,t))&&n!==t},Bn=function(n,t){return cn(H(n),H(t))<2&&fn(H(n),H(t))<2&&n!==t},An=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"w";if(r=r.toLowerCase(),!/[wb]/.test(r))return!1;var e="w"===r?"P":"p";return n=H(n),t=H(t),_n(e,n,t)?"P"===e?t===n+8?1:t===n+16&&1===J(n)?2:0:t===n-8?1:t===n-16&&6===J(n)?2:0:0},Cn=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"w";return r=r.toLowerCase(),!!/[wb]/.test(r)&&(!!_n("w"===r?"P":"p",n,t)&&(1===fn(n,t)&&1===cn(n,t)))},Sn=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"w";return r=r.toLowerCase(),!!/[wb]/.test(r)&&(n=H(n),t=H(t),"w"===r?4===n&&(2===t||6===t):60===n&&(58===t||62===t))},Nn=function(n,t){var r=$(n),e=[],i=!0,u=!1,o=void 0;try{for(var a,c=d[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var f=a.value;r[f]===t&&(e=[].concat(h(e),[f]))}}catch(s){u=!0,o=s}finally{try{i||null==c.return||c.return()}finally{if(u)throw o}}return e},Fn=function(n){return Nn(n,"p")},Mn=function(n){return Nn(n,"n")},jn=function(n){return Nn(n,"b")},Tn=function(n){return Nn(n,"b").filter(function(n){return an(n)})},xn=function(n){return Nn(n,"b").filter(function(n){return on(n)})},Ln=function(n){return Nn(n,"r")},En=function(n){return Nn(n,"q")},Dn=function(n){return Nn(n,"k")},In=function(n){return Nn(n,"P")},$n=function(n){return Nn(n,"N")},Un=function(n){return Nn(n,"B")},zn=function(n){return Nn(n,"B").filter(function(n){return an(n)})},Wn=function(n){return Nn(n,"B").filter(function(n){return on(n)})},Xn=function(n){return Nn(n,"R")},Gn=function(n){return Nn(n,"Q")},Hn=function(n){return Nn(n,"K")},Jn=function(n){return[].concat(h(In(n)),h($n(n)),h(Un(n)),h(Xn(n)),h(Gn(n)),h(Hn(n)))},Vn=function(n){return[].concat(h(Fn(n)),h(Mn(n)),h(jn(n)),h(Ln(n)),h(En(n)),h(Dn(n)))},Yn=function(n){return[].concat(h($n(n)),h(Un(n)),h(Xn(n)),h(Gn(n)))},Zn=function(n){return[].concat(h(Mn(n)),h(jn(n)),h(Ln(n)),h(En(n)))},nt=function(n){return Yn(n).map(function(t){return ct(n,t)}).reduce(function(n,t){return n.concat(t)},[])},tt=function(n){return Zn(n).map(function(t){return ct(n,t)}).reduce(function(n,t){return n.concat(t)},[])},rt=function(n){return In(n).map(function(t){return d.filter(function(r){return bt(n,t,r)})}).reduce(function(n,t){return n.concat(t)})},et=function(n){return Fn(n).map(function(t){return d.filter(function(r){return bt(n,t,r)})}).reduce(function(n,t){return n.concat(t)})},it=function(n,t){return rn(n)&&rn(t)||en(n)&&en(t)},ut=function(n,t){return rn(n)&&en(t)||en(n)&&rn(t)},ot=function(n,t){return mn(n)[H(t)]},at=function(n,t){return t.map(function(t){var r={};return r[t]=ot(n,t),r}).reduce(function(n,t){return s({},n,{},t)},{})},ct=function(n,t){var r=mn(n);t=H(t);var e,i=r[t];if(un(i))return[];switch(i.toLowerCase()){case"n":e=gn;break;case"b":e=Kn;break;case"r":e=On;break;case"q":e=Qn;break;case"k":e=Bn;break;default:return"p"===i?[t-7,t-9]:[t+7,t+9]}return d.filter(function(n){return e(t,n)}).filter(function(n){return Rn(r,dn(t,n))})},ft=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"w";return r=r.toLowerCase(),/[wb]/.test(r)?(t=H(t),("w"===r?Jn(n):Vn(n)).filter(function(r){return ct(n,r).some(function(n){return n===t})})):null},st=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"w",r="w"===t.toLowerCase()?"b":"w";return ft(n,qn(n,t.toLowerCase()),r)},lt=function(n){return st(n,L(n).turn).length>0},ht=function(n){return lt(n)&&0===Pt(n).length},pt=function(n){return!lt(n)&&0===Pt(n).length},gt=function(n){if(!lt(n))return!1;var t=u("w"===L(n).turn?["w","b",qn(n,"w")]:["b","w",qn(n,"b")],3),r=t[0],e=(t[1],t[2]),i=wt(n);if(i.find(function(n){return n[0]===e})[1].length>0)return!1;var o=st(n,r);if(o.length>1)return!0;var a=i.filter(function(n){return n[0]!==e}),c=dn(o[0],e).filter(function(n){return n!==e}),f=a.filter(function(n){return n[1].some(function(n){return c.find(function(t){return t===n})})});if(f.length>0){var s=!0,l=!1,h=void 0;try{for(var p,g=f[Symbol.iterator]();!(s=(p=g.next()).done);s=!0){var v=p.value,b=(v[0],v[1].filter(function(n){return c.find(function(t){return t===n})}),!0),w=!1,P=void 0;try{for(var y,d=v[1][Symbol.iterator]();!(b=(y=d.next()).done);b=!0){var k=y.value,_=dt(n,v[0],k,"Q");if(_&&yt(_).valid)return!1}}catch(m){w=!0,P=m}finally{try{b||null==d.return||d.return()}finally{if(w)throw P}}}}catch(m){l=!0,h=m}finally{try{s||null==g.return||g.return()}finally{if(l)throw h}}}return!0},vt=function(n,t,r,e){var i=L(n),u=i.castling,o=(i.turn,i.fenArray),a="k"===e?"b":"w",c="k"===e?"w":"b";if(Bn(t,r))return 0===ft(n,r,c).length;if(Sn(t,r,a)){if(!un(o[r]))return!1;var f;switch(r){case 6:if(!/K/.test(u))return!1;f=dn(4,6);break;case 2:if(!/Q/.test(u))return!1;f=dn(4,2);break;case 62:if(!/k/.test(u))return!1;f=dn(60,62);break;case 58:if(!/q/.test(u))return!1;f=dn(60,58);break;default:return!1}return f.map(function(t){return ft(n,t,c)}).some(function(n){return n.length>0}),!f.map(function(t){return ft(n,t,c)}).some(function(n){return n.length>0})}return!1},bt=function(n,t,r){if(dn(t,r).length<2)return!1;if(!Rn(n,dn(t,r)))return!1;t=H(t),r=H(r);var e=X(r),i=L(n),u=i.fenArray,o=i.enPassant,a=u[t];if("0"===a)return!1;var c=u[r];if(it(a,c))return!1;switch(a){case"p":if(An(t,r,"b")&&!un(c))return!1;if(Cn(t,r,"b")&&!en(c)&&e!==o)return!1;if(!An(t,r,"b")&&!Cn(t,r,"b"))return!1;break;case"P":if(An(t,r,"w")&&!un(c))return!1;if(Cn(t,r,"w")&&!rn(c)&&e!==o)return!1;if(!An(t,r,"w")&&!Cn(t,r,"w"))return!1;break;case"K":case"k":return vt(n,t,r,a);case"q":case"Q":if(!Qn(t,r))return!1;break;case"r":case"R":if(!On(t,r))return!1;break;case"b":case"B":if(!Kn(t,r))return!1;break;case"n":case"N":if(!gn(t,r))return!1;break;default:return!1}return!0},wt=function(n){var t=L(n),r=(t.fenArray,t.turn);t.castling,t.enPassant;return("w"===r?Jn(n):Vn(n)).map(function(t){return[t,d.filter(function(r){return bt(n,t,r)})]})},Pt=function(n){var t=[],r=!0,e=!1,i=void 0;try{for(var u,o=wt(n)[Symbol.iterator]();!(r=(u=o.next()).done);r=!0){var a=u.value,c=!0,f=!1,s=void 0;try{for(var l,p=a[1][Symbol.iterator]();!(c=(l=p.next()).done);c=!0){var g=l.value,v=dt(n,a[0],g,"Q");v&&yt(v).valid&&(t=[].concat(h(t),[{from:a[0],to:g}]))}}catch(b){f=!0,s=b}finally{try{c||null==p.return||p.return()}finally{if(f)throw s}}}}catch(b){e=!0,i=b}finally{try{r||null==o.return||o.return()}finally{if(e)throw i}}return t},yt=function(n){var t=L(n),r=t.fenArray,e=t.turn;return 1!==r.filter(function(n){return"k"===n}).length?{valid:!1,code:2,message:"There must be one and only one black king"}:1!==r.filter(function(n){return"K"===n}).length?{valid:!1,code:3,message:"There must be one and only one white king"}:st(n,"w"===e?"b":"w").length>0?{valid:!1,code:1,message:"The ".concat("b"===e?"white":"black"," side is in check, while it's not its turn to move")}:{valid:!0,code:0,message:"OK"}},dt=function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Q";if(!n||"String"!==n.constructor.name)return!1;if(!bt(n,t,r))return!1;var i=L(n),u=i.fenArray,o=i.turn,a=i.castling,c=i.enPassant,f=i.halfMoveClock,s=i.fullMoveNumber;t=H(t),r=H(r);var l=[u[t],u[r]],p=l[0],g=l[1],v=h(u);v[t]="0","P"===p&&7===J(r)?v[r]=e?e.toUpperCase():"Q":"p"===p&&0===J(r)?v[r]=e?e.toLowerCase():"q":v[r]=p,"P"===p&&X(r)===c?v[r-8]="0":"p"===p&&X(r)===c&&(v[r+8]="0"),"K"===p&&4===t&&6===r?(v[5]="R",v[7]="0"):"K"===p&&4===t&&2===r?(v[3]="R",v[0]="0"):"k"===p&&60===t&&62===r?(v[61]="r",v[63]="0"):"k"===p&&60===t&&58===r&&(v[59]="r",v[56]="0"),4===t&&(a=a.replace("K","").replace("Q","")),60===t&&(a=a.replace("k","").replace("q","")),7===t&&(a=a.replace("K","")),0===t&&(a=a.replace("Q","")),63===t&&(a=a.replace("k","")),56===t&&(a=a.replace("q","")),""===a&&(a="-"),o="w"===o?"b":"w",c="P"===p&&2===An(t,r,"w")?X(r-8):"p"===p&&2===An(t,r,"b")?X(r+8):"-",f="P"!==p&&"p"!==p&&"0"===g?parseInt(f)+1:"0",s="w"===o?parseInt(s)+1:s;var b=z(v);return"".concat(b," ").concat(o," ").concat(a," ").concat(c," ").concat(f," ").concat(s)},kt=function(n){return n.replace(/[+#=x]/g,"")},_t=function(n,t){var r,e,i,o,a=L(n);if("0-0"===(t=kt(t))||"O-O"===t)return"w"===a.turn?{sqFrom:4,sqTo:6,promotion:null}:{sqFrom:60,sqTo:62,promotion:null};if("0-0-0"===t||"O-O-O"===t)return"w"===a.turn?{sqFrom:4,sqTo:2,promotion:null}:{sqFrom:60,sqTo:58,promotion:null};if(/[a-h]/.test(t[0])){var c=Z(t[0]);return e=/[1-8]/.test(t[1])?H(t.slice(0,2)):H(t.slice(1,3)),r=(o="w"===a.turn?In(n):Fn(n)).find(function(t){return V(t)===c&&bt(n,t,e)})||-1,i=/[QNRBqnrb]/.test(t[t.length-1])?t[t.length-1]:null,{sqFrom:r,sqTo:e,promotion:i}}if(en(t[0])&&"P"!==t[0]){switch(i=null,t[0]){case"N":o="w"===a.turn?$n(n):Mn(n);break;case"B":o="w"===a.turn?Un(n):jn(n);break;case"R":o="w"===a.turn?Xn(n):Ln(n);break;case"Q":o="w"===a.turn?Gn(n):En(n);break;case"K":o="w"===a.turn?Hn(n):Dn(n)}if(e=G(t.slice(t.length-2,t.length)),5===t.length)r=G(t.slice(1,3));else if(4===t.length){var f=t[1],s=u(/[1-8]/.test(f)?[J,parseInt(f)-1]:[V,Z(f)],2),l=s[0],h=s[1];r=o.find(function(t){return l(t)===h&&bt(n,t,e)})||-1}else{var p=o.filter(function(t){return bt(n,t,e)});switch(p.length){case 0:r=-1;break;case 1:r=p[0];break;default:var g=p.filter(function(t){var r=dt(n,t,e,null);return r&&yt(r).valid});r=1===g.length?g[0]:-1}}return{sqFrom:r,sqTo:e,promotion:i}}return{sqFrom:-1,sqTo:-1,promotion:null}},mt=function(n,t,r,e){var i=L(n),u=i.fenArray,o=i.turn,a=i.enPassant;i.castling;t=H(t),r=H(r);var c,f,s,l,h,p,g=[u[t],u[r]],v=g[0],b=g[1];if(un(v))return null;var w=dt(n,t,r,e);if(!w||!yt(w).valid)return null;if(p=ht(w)?"#":lt(w)?"+":"","K"===v&&4===t){if(6===r)return"O-O".concat(p);if(2===r)return"O-O-O".concat(p)}if("k"===v&&60===t){if(62===r)return"O-O".concat(p);if(58===r)return"O-O-O".concat(p)}if(s=un(b)?/[Pp]/.test(v)&&H(a)===r?"x":"":"x",l=X(r),/[Pp]/.test(v))c=ln(t,r)?"":Y(V(t)),f="",h=7===J(r)&&"P"===v||7===J(r)&&"P"===v?"=".concat(e?e.toUpperCase():"Q"):"";else{c=v.toUpperCase(),h="";var P=ft(n,r,o).filter(function(n){return u[n]===v&&n!==t});if(0===P.length)f="";else{var y=P.filter(function(t){var e=dt(n,t,r,null);return e&&yt(e).valid});f=y.length>1?X(t):1===y.length?ln(t,y[0])?(J(t)+1).toString():Y(V(t)):""}}return"".concat(c).concat(f).concat(s).concat(l).concat(h).concat(p)},qt=function(n){return n.split(/\s+/).slice(0,4).join(" ")},Rt=function(n){var t=L(n);return t.fenArray=y(0,63).fill("0"),t.fenString=z(t.fenArray),E(t)},Kt=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"w";if(!/^[wb]$/i.test(t))return null;var r=u("w"===t.toLowerCase()?[In(n),$n(n),Wn(n),zn(n),Xn(n),Gn(n),Fn(n),Mn(n),xn(n),Tn(n),Ln(n),En(n)]:[Fn(n),Mn(n),xn(n),Tn(n),Ln(n),En(n),In(n),$n(n),Wn(n),zn(n),Xn(n),Gn(n)],12),e=r[0],i=r[1],o=r[2],a=r[3],c=r[4],f=r[5],s=r[6],l=r[7],h=r[8],p=r[9],g=r[10];r[11];if(e.length||c.length||f.length)return!1;if(o.length&&a.length)return!1;if((o.length||a.length)&&i.length)return!1;if(i.length>1)return!1;if(o.length){if(s.length||l.length||p.length)return!1}else if(a.length){if(s.length||l.length||h.length)return!1}else if(i.length&&(s.length||l.length||h.length||p.length||g.length))return!1;return!0},Ot=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;r(this,n),this.reset(t)}return i(n,[{key:"reset",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=yt(n);if(!t.valid)throw new Error(t.message);this.__fens__=[n],this.__sans__=[""]}},{key:"load",value:function(n){this.reset(n)}},{key:"ascii",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="   +".concat("---+".repeat(8),"\n");n=n||this.fens().length-1;var e=L(this.fens()[n]).fenArray,i=(t?y(0,7):y(7,0,-1)).map(function(n){return(n+1).toString()}),u=(t?y(7,0,-1):y(0,7)).map(function(n){return String.fromCharCode(n+97)}).reduce(function(n,t){return n+"  "+t+" "},"   ")+" \n",o=e.map(function(n,r,e){return e[r^(t?7:56)]}).map(function(n){return"0"===n?" ":n}),a=b(o,8).map(function(n,t){return n.reduce(function(n,t){return n+"| "+t+" "},""+" ".concat(i[t]," "))+"|\n"+r});return"".concat(r).concat(a.join("")).concat(u)}},{key:"clear",value:function(){return this.__fens__=[].concat(h(this.__fens__.slice(0,-1)),[Rt(this.__fens__[this.__fens__.length-1])]),this}},{key:"move",value:function(){for(var n,t,r,e=L(this.fen),i=arguments.length,u=new Array(i),o=0;o<i;o++)u[o]=arguments[o];switch(u.length){case 0:return!1;case 1:if(k.test(u[0])){var a=_t(this.fen,u[0]);n=a.sqFrom,t=a.sqTo,r=a.promotion}else if(/[a-h][1-8]-?[a-h][1-8][QRNBqrnb]?/.test(u[0])){r=u[0][u[0].length-1].match(/QRNB/i)?u[0][u[0].length-1].toUpperCase():null;var c=u[0].replace(/-/g,"");n=H(c.slice(0,2)),t=H(c.slice(2,4))}break;default:n=H(u[0]),t=H(u[1]),r=u[2]}if(en(e.fenArray[n])&&"b"===e.turn||rn(e.fenArray[n])&&"w"===e.turn)return!1;var f=dt(this.fen,n,t,r);if(!f)return!1;if(!yt(f).valid)return!1;var l=mt(this.fen,n,t,r),p=e.fenArray,g=e.turn,v=e.enPassant,b=[p[n],p[t]],w=b[0],P=b[1],y={san:l,piece:w,color:g,from:X(n),to:X(t)};un(P)||(y=s({},y,{captured:P}));var d=/[Pp]/.test(w)&&t===G(v),_=/[Pp]/.test(w)&&2===cn(n,t),m="p"===w&&0===J(t)||"P"===w&&7===J(t);m&&(y=s({},y,{promotion:r?r.toUpperCase():"Q"}));var q="";return"K"===w&&4===n&&6===t||"k"===w&&60===n&&62===t?q+="k":("K"===w&&4===n&&2===t||"k"===w&&60===n&&58===t)&&(q+="q"),m?q+="p":_&&(q+="b"),q+=d?"e":y.captured?"c":"n",this.__sans__=[].concat(h(this.__sans__),[s({},y,{flags:q})]),this.__fens__=[].concat(h(this.__fens__),[f]),setTimeout(function(){},0),this}},{key:"history",value:function(n){return n&&n.verbose?this.__sans__.slice(1):this.__sans__.slice(1).map(function(n){return n.san})}},{key:"moves",value:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?Pt(this.fen).filter(function(n){return n.from===H(t)}).map(function(t){return mt(n.fen,t.from,t.to,"Q")}):Pt(this.fen).map(function(t){return mt(n.fen,t.from,t.to,"Q")})}},{key:"get",value:function(n){return L(this.fen).fenArray[H(n)]}},{key:"put",value:function(n,t){if(!/[0pnbrqkPNBRQK]/.test(t))return null;n=H(n);var r=L(this.fen);r.fenArray[n]=t,r.fenString=z(r.fenArray);var e=E(r);return this.__fens__=[].concat(h(this.__fens__.slice(0,-1)),[e]),this}},{key:"fens",value:function(){return this.__fens__}},{key:"undo",value:function(){return!(this.__fens__.length<2)&&(this.__fens__.splice(this.__fens__.length-1,this.__fens__.length),this.__sans__.splice(this.__sans__.length-1,this.__sans__.length),this)}},{key:"toString",value:function(){return this.fen}},{key:"version",get:function(){return"0.9.6"}},{key:"in_fifty_moves_rule",get:function(){return parseInt(L(this.fen).halfMoveClock)>=100}},{key:"in_threefold_repetition",get:function(){var n=qt(this.fen);return w(this.fens().map(qt))[n]>=3}},{key:"insufficient_material",get:function(){return Kt(this.fen,"w")&&Kt(this.fen,"b")}},{key:"in_draw",get:function(){return this.in_fifty_moves_rule||this.in_threefold_repetition||this.insufficient_material||this.isStaleMate}},{key:"isCheck",get:function(){return lt(this.fen)}},{key:"isCheckMate",get:function(){return ht(this.fen)}},{key:"isStaleMate",get:function(){return pt(this.fen)}},{key:"fen",get:function(){return this.__fens__[this.__fens__.length-1]}},{key:"game_over",get:function(){return this.in_draw||this.isCheckMate}}]),n}(),Qt=(l(n={groupArray:w,makeSet:P,range:y,sanRegExp:k,pgnTagLineRegExp:_,defaultFen:m,sicilianFen:q,scandinavianFen:R,oddFrenchFen:K,mateLocoFen:O,mateAyudadoFen:Q,prePastorFen:B,pastorFen:A,makeFenComparable:qt,fen2obj:L,obj2fen:E,expandFen:D,compressFen:I,fen2array:$,defaultFenArray:U,array2fenString:z,computedFenString:W,row:J,col:V,sq2rowcol:nn,rowcol2sq:tn,col2letter:Y,letter2col:Z,sq2san:X,san2sq:G,isBlackFigure:rn,isWhiteFigure:en,isEmptyFigure:un,isDarkSquare:on,isLightSquare:an,difRow:cn,difCol:fn,isSameRow:sn,isSameCol:ln,isDiagonal:hn,isAntiDiagonal:pn,isKingReach:vn,path:dn,innerPath:kn,isForward:_n,kingSq:qn,isClearPath:Rn,isPawnMove:An,isPawnAttack:Cn,isCastling:Sn,isKingMove:Bn,isBishopMove:Kn,isRookMove:On,isQueenMove:Qn,army:Nn,wBishops:Un,wBishopsD:Wn},"wBishopsD",Wn),l(n,"wKings",Hn),l(n,"wKnights",$n),l(n,"wPawns",In),l(n,"wQueens",Gn),l(n,"wRooks",Xn),l(n,"bBishops",jn),l(n,"bBishopsD",xn),l(n,"bBishopsL",Tn),l(n,"bKings",Dn),l(n,"bKnights",Mn),l(n,"bPawns",Fn),l(n,"bQueens",En),l(n,"bRooks",Ln),l(n,"wArmy",Jn),l(n,"bArmy",Vn),l(n,"wAttackers",Yn),l(n,"bAttackers",Zn),l(n,"wAttacks",nt),l(n,"bAttacks",tt),l(n,"wPMoves",rt),l(n,"bPMoves",et),l(n,"isFriend",it),l(n,"isFoe",ut),l(n,"getFigure",ot),l(n,"getFigures",at),l(n,"attacksFromSq",ct),l(n,"attacksOnSq",ft),l(n,"checksTo",st),l(n,"isCheck",lt),l(n,"isCheckMate",ht),l(n,"isStaleMate",pt),l(n,"canKingMove",vt),l(n,"canMove",bt),l(n,"candidateMoves",wt),l(n,"availableMoves",Pt),l(n,"validateFen",yt),l(n,"tryMove",dt),l(n,"stripSan",kt),l(n,"args2san",mt),l(n,"san2args",_t),l(n,"clear",Rt),l(n,"insuficientMaterial",Kt),l(n,"Chess",Ot),n),Bt=Qt;"undefined"!=typeof window&&(window.Chess=Ot),void 0!==t&&(t.Chess=Ot);try{if("undefined"!=typeof module)module.exports=Ot;else var At=Ot}catch(Ct){console.log("EXPORT (2) ERROR: ".concat(Ct.message))}
},{}]},{},["Focm"], null)
//# sourceMappingURL=/index.js.map