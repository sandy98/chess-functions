parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Focm":[function(require,module,exports) {
var global = arguments[3];
var n=arguments[3];function r(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function t(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function e(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}function i(n,r){return a(n)||o(n,r)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(n,r){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n)){var t=[],e=!0,i=!1,u=void 0;try{for(var o,a=n[Symbol.iterator]();!(e=(o=a.next()).done)&&(t.push(o.value),!r||t.length!==r);e=!0);}catch(c){i=!0,u=c}finally{try{e||null==a.return||a.return()}finally{if(i)throw u}}return t}}function a(n){if(Array.isArray(n))return n}function c(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);r&&(e=e.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,e)}return t}function f(n){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(t,!0).forEach(function(r){s(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c(t).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function s(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function l(n){return v(n)||h(n)||p()}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}function v(n){if(Array.isArray(n)){for(var r=0,t=new Array(n.length);r<n.length;r++)t[r]=n[r];return t}}var b=function(n){return n.reduce(function(n,r){return r in n?n[r]+=1:n[r]=1,n},{})},g=function(n){return n.reduce(function(n,r){return n.find(function(n){return n===r})?n:[].concat(l(n),[r])},[])},P=function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r===t?[r]:(e||(e=r<t?1:-1),r>t&&e>0?[]:r<t&&e<0?[]:[r].concat(l(n(r+e,t,e))))},w=P(0,63),d=/(?:(^0-0-0|^O-O-O)|(^0-0|^O-O)|(?:^([a-h])(?:([1-8])|(?:x([a-h][1-8])))(?:=?([NBRQ]))?)|(?:^([NBRQK])([a-h])?([1-8])?(x)?([a-h][1-8])))(?:(\+)|(#)|(\+\+))?$/,k=/^\s*\[\s*(.+?)\s+"(.+?)"\s*\]\s*$/,y="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",m="rnbqkbnr/pp1ppppp/8/2p5/4P3/8/PPPP1PPP/RNBQKBNR w KQkq c6 0 1",_="rnbqkbnr/ppp1pppp/8/3p4/4P3/8/PPPP1PPP/RNBQKBNR w KQkq d6 0 2",q="rnbqkbnr/ppp2ppp/4p3/3pP3/8/8/PPPP1PPP/RNBQKBNR w KQkq d6 0 3",K="rnb1kbnr/pppp1ppp/8/4p3/6Pq/5P2/PPPPP2P/RNBQKBNR w KQkq - 1 3",R="r1bqnNnr/pppkpp1p/7R/3p4/8/8/PPPPPPP1/RNBQKBN1 b Q - 0 6",O="r1bqkb1r/pppp1ppp/2n2n2/4p2Q/2B1P3/8/PPPP1PPP/RNB1K1NR w KQkq - 4 4",Q="r1bqkb1r/pppp1Qpp/2n2n2/4p3/2B1P3/8/PPPP1PPP/RNB1K1NR b KQkq - 0 4",S="rnbqk2r/pppp1ppp/5n2/2b1p3/2B1P3/5N2/PPPP1PPP/RNBQK2R w KQkq - 4 4",A="rnbqk2r/pppp1ppp/5n2/2b1p3/2B1P3/5N2/PPPP1PPP/RNBQ1RK1 b kq - 5 4",C="7k/7P/7K/8/8/8/8/8 w - - 0 1",B="R6k/6pp/8/8/3n4/8/8/7K b - - 0 1",F="R6k/6pp/8/8/3r4/8/8/7K b - - 0 1",N="R6k/6qp/5B2/8/8/8/8/7K b - - 0 1",M="8/6B1/6p1/R6k/7p/8/8/K5R1 b KQkq - 0 1",j="8/5BB1/6p1/R6k/7p/8/8/K5R1 b KQkq - 0 1",T=function(n){var r=n.split(/\s+/);return{fenString:r[0],turn:r[1],castling:r[2],enPassant:r[3],halfMoveClock:r[4],fullMoveNumber:r[5],fenArray:I(r[0])}},x=function(n){return delete n.fenArray,values(n).join(" ")},L=function(n){return n.replace(/\//g,"").replace(/[1-8]/g,function(n){return"0".repeat(parseInt(n))})},E=function(n){return n.replace(/(.{8})(?!$)/g,"$1/").replace(/0+/g,function(n){return n.length.toString()})},I=function(n){if(/^(.+\/){7}.+$/.test(n))n=L(n);else if(64!==n.length)return[];return n.split("").map(function(n,r,t){return t[56^r]})},D=I(T(y).fenString),$=function(n){return E(n.map(function(r,t){return n[56^t]}).join(""))},U=$(D),z=function(n){return n>=0&&n<64?"".concat(String.fromCharCode(97+H(n))).concat(String.fromCharCode(49+G(n))):"-"},W=function(n){return/[a-h][1-8]/.test(n)?Z(n.charCodeAt(1)-49,n.charCodeAt(0)-97):-1},X=function(n){return isNaN(n)?W(n):parseInt(n)},G=function(n){return Math.floor(X(n)/8)},H=function(n){return X(n)%8},J=function(n){return String.fromCharCode(97+n)},V=function(n){return n.charCodeAt(0)-97},Y=function(n){return{row:G(n),col:H(n)}},Z=function(n,r){return 8*n+r},nn=function(n){return/[pnbrqk]/.test(n)},rn=function(n){return/[PNBRQK]/.test(n)},tn=function(n){return"0"===n},en=function(n){return"String"===n.constructor.name&&(n=W(n)),G(n)%2==0&&H(n)%2==0||G(n)%2!=0&&H(n)%2!=0},un=function(n){return!en(n)},on=function(n,r){return Math.abs(G(n)-G(r))},an=function(n,r){return Math.abs(H(n)-H(r))},cn=function(n,r){return 0===on(n,r)},fn=function(n,r){return 0===an(n,r)},sn=function(n,r){return an(n,r)===on(n,r)},ln=function(n,r){return an(n,r)===on(n,r)&&Math.abs(X(n)-X(r))%7==0&&63!==X(n)&&63!==X(r)},pn=function(n,r){return 2===an(n,r)&&1===on(n,r)||1===an(n,r)&&2===on(n,r)},hn=function(n,r){return an(n,r)<2&&on(n,r)<2},vn=1,bn=8,gn=9,Pn=7,wn=function(n,r){var t;if(n===r)return[X(n)];if(fn(n,r))t=X(n)<X(r)?bn:-bn;else if(cn(n,r))t=X(n)<X(r)?vn:-vn;else if(ln(n,r))t=X(n)<X(r)?Pn:-Pn;else{if(!sn(n,r))return pn(n,r)?[X(n),X(r)]:[];t=X(n)<X(r)?gn:-gn}return P(X(n),X(r),t)},dn=function(n){return n.slice(1,-1)},kn=function(n,r,t){return nn(n)?G(r)>G(t):G(r)<G(t)},yn=function(n){return"Array"===n.constructor.name?n:"String"!==n.constructor.name?[]:/\s+/.test(n)?T(n).fenArray:I(n)},mn=function(n,r){return yn(n).findIndex(function(n){return n===(/[a-z]/.test(r)&&"w"!==r?"k":"K")})},_n=function(n,r){if(r.length<3)return!0;var t=yn(n),e=dn(r),i=!0,u=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){if("0"!==t[a.value])return!1}}catch(f){u=!0,o=f}finally{try{i||null==c.return||c.return()}finally{if(u)throw o}}return!0},qn=function(n,r){return sn(n,r)&&n!==r},Kn=function(n,r){return(cn(n,r)||fn(n,r))&&n!==r},Rn=function(n,r){return(qn(n,r)||Kn(n,r))&&n!==r},On=function(n,r){return on(X(n),X(r))<2&&an(X(n),X(r))<2&&n!==r},Qn=function(n,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"w";if(t=t.toLowerCase(),!/[wb]/.test(t))return!1;var e="w"===t?"P":"p";return n=X(n),r=X(r),kn(e,n,r)?"P"===e?r===n+8?1:r===n+16&&1===G(n)?2:0:r===n-8?1:r===n-16&&6===G(n)?2:0:0},Sn=function(n,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"w";return t=t.toLowerCase(),!!/[wb]/.test(t)&&(!!kn("w"===t?"P":"p",n,r)&&(1===an(n,r)&&1===on(n,r)))},An=function(n,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"w";return t=t.toLowerCase(),!!/[wb]/.test(t)&&(n=X(n),r=X(r),"w"===t?4===n&&(2===r||6===r):60===n&&(58===r||62===r))},Cn=function(n,r){var t=I(n),e=[],i=!0,u=!1,o=void 0;try{for(var a,c=w[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var f=a.value;t[f]===r&&(e=[].concat(l(e),[f]))}}catch(s){u=!0,o=s}finally{try{i||null==c.return||c.return()}finally{if(u)throw o}}return e},Bn=function(n){return Cn(n,"p")},Fn=function(n){return Cn(n,"n")},Nn=function(n){return Cn(n,"b")},Mn=function(n){return Cn(n,"r")},jn=function(n){return Cn(n,"q")},Tn=function(n){return Cn(n,"k")},xn=function(n){return Cn(n,"P")},Ln=function(n){return Cn(n,"N")},En=function(n){return Cn(n,"B")},In=function(n){return Cn(n,"R")},Dn=function(n){return Cn(n,"Q")},$n=function(n){return Cn(n,"K")},Un=function(n){return[].concat(l(xn(n)),l(Ln(n)),l(En(n)),l(In(n)),l(Dn(n)),l($n(n)))},zn=function(n){return[].concat(l(Bn(n)),l(Fn(n)),l(Nn(n)),l(Mn(n)),l(jn(n)),l(Tn(n)))},Wn=function(n){return[].concat(l(Ln(n)),l(En(n)),l(In(n)),l(Dn(n)))},Xn=function(n){return[].concat(l(Fn(n)),l(Nn(n)),l(Mn(n)),l(jn(n)))},Gn=function(n){return Wn(n).map(function(r){return tr(n,r)}).reduce(function(n,r){return n.concat(r)},[])},Hn=function(n){return Xn(n).map(function(r){return tr(n,r)}).reduce(function(n,r){return n.concat(r)},[])},Jn=function(n){return xn(n).map(function(r){return w.filter(function(t){return sr(n,r,t)})}).reduce(function(n,r){return n.concat(r)})},Vn=function(n){return Bn(n).map(function(r){return w.filter(function(t){return sr(n,r,t)})}).reduce(function(n,r){return n.concat(r)})},Yn=function(n,r){return nn(n)&&nn(r)||rn(n)&&rn(r)},Zn=function(n,r){return nn(n)&&rn(r)||rn(n)&&nn(r)},nr=function(n,r){return yn(n)[X(r)]},rr=function(n,r){return r.map(function(r){var t={};return t[r]=nr(n,r),t}).reduce(function(n,r){return f({},n,{},r)},{})},tr=function(n,r){var t=yn(n);r=X(r);var e,i=t[r];if(tn(i))return[];switch(i.toLowerCase()){case"n":e=pn;break;case"b":e=qn;break;case"r":e=Kn;break;case"q":e=Rn;break;case"k":e=On;break;default:return"p"===i?[r-7,r-9]:[r+7,r+9]}return w.filter(function(n){return e(r,n)}).filter(function(n){return _n(t,wn(r,n))})},er=function(n,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"w";return t=t.toLowerCase(),/[wb]/.test(t)?(r=X(r),("w"===t?Un(n):zn(n)).filter(function(t){return tr(n,t).some(function(n){return n===r})})):null},ir=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"w",t="w"===r.toLowerCase()?"b":"w";return er(n,mn(n,r.toLowerCase()),t)},ur=function(n){return ir(n,T(n).turn).length>0},or=function(n){return ur(n)&&0===pr(n).length},ar=function(n){return!ur(n)&&0===pr(n).length},cr=function(n){if(!ur(n))return!1;var r=i("w"===T(n).turn?["w","b",mn(n,"w")]:["b","w",mn(n,"b")],3),t=r[0],e=(r[1],r[2]),u=lr(n);if(u.find(function(n){return n[0]===e})[1].length>0)return!1;var o=ir(n,t);if(o.length>1)return!0;var a=u.filter(function(n){return n[0]!==e}),c=wn(o[0],e).filter(function(n){return n!==e}),f=a.filter(function(n){return n[1].some(function(n){return c.find(function(r){return r===n})})});if(f.length>0){var s=!0,l=!1,p=void 0;try{for(var h,v=f[Symbol.iterator]();!(s=(h=v.next()).done);s=!0){var b=h.value,g=(b[0],b[1].filter(function(n){return c.find(function(r){return r===n})}),!0),P=!1,w=void 0;try{for(var d,k=b[1][Symbol.iterator]();!(g=(d=k.next()).done);g=!0){var y=d.value,m=vr(n,b[0],y,"Q");if(m&&hr(m).valid)return!1}}catch(_){P=!0,w=_}finally{try{g||null==k.return||k.return()}finally{if(P)throw w}}}}catch(_){l=!0,p=_}finally{try{s||null==v.return||v.return()}finally{if(l)throw p}}}return!0},fr=function(n,r,t,e){var i=T(n),u=i.castling,o=(i.turn,i.fenArray),a="k"===e?"b":"w",c="k"===e?"w":"b";if(On(r,t))return 0===er(n,t,c).length;if(An(r,t,a)){if(!tn(o[t]))return!1;var f;switch(t){case 6:if(!/K/.test(u))return!1;f=wn(4,6);break;case 2:if(!/Q/.test(u))return!1;f=wn(4,2);break;case 62:if(!/k/.test(u))return!1;f=wn(60,62);break;case 58:if(!/q/.test(u))return!1;f=wn(60,58);break;default:return!1}return f.map(function(r){return er(n,r,c)}).some(function(n){return n.length>0}),!f.map(function(r){return er(n,r,c)}).some(function(n){return n.length>0})}return!1},sr=function(n,r,t){if(wn(r,t).length<2)return!1;if(!_n(n,wn(r,t)))return!1;r=X(r),t=X(t);var e=z(t),i=T(n),u=i.fenArray,o=i.enPassant,a=u[r];if("0"===a)return!1;var c=u[t];if(Yn(a,c))return!1;switch(a){case"p":if(Qn(r,t,"b")&&!tn(c))return!1;if(Sn(r,t,"b")&&!rn(c)&&e!==o)return!1;if(!Qn(r,t,"b")&&!Sn(r,t,"b"))return!1;break;case"P":if(Qn(r,t,"w")&&!tn(c))return!1;if(Sn(r,t,"w")&&!nn(c)&&e!==o)return!1;if(!Qn(r,t,"w")&&!Sn(r,t,"w"))return!1;break;case"K":case"k":return fr(n,r,t,a);case"q":case"Q":if(!Rn(r,t))return!1;break;case"r":case"R":if(!Kn(r,t))return!1;break;case"b":case"B":if(!qn(r,t))return!1;break;case"n":case"N":if(!pn(r,t))return!1;break;default:return!1}return!0},lr=function(n){var r=T(n),t=(r.fenArray,r.turn);r.castling,r.enPassant;return("w"===t?Un(n):zn(n)).map(function(r){return[r,w.filter(function(t){return sr(n,r,t)})]})},pr=function(n){var r=[],t=!0,e=!1,i=void 0;try{for(var u,o=lr(n)[Symbol.iterator]();!(t=(u=o.next()).done);t=!0){var a=u.value,c=!0,f=!1,s=void 0;try{for(var p,h=a[1][Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var v=p.value,b=vr(n,a[0],v,"Q");b&&hr(b).valid&&(r=[].concat(l(r),[{from:a[0],to:v}]))}}catch(g){f=!0,s=g}finally{try{c||null==h.return||h.return()}finally{if(f)throw s}}}}catch(g){e=!0,i=g}finally{try{t||null==o.return||o.return()}finally{if(e)throw i}}return r},hr=function(n){var r=T(n),t=r.fenArray,e=r.turn;return 1!==t.filter(function(n){return"k"===n}).length?{valid:!1,code:2,message:"There must be one and only one black king"}:1!==t.filter(function(n){return"K"===n}).length?{valid:!1,code:3,message:"There must be one and only one white king"}:ir(n,"w"===e?"b":"w").length>0?{valid:!1,code:1,message:"The ".concat("b"===e?"white":"black"," side is in check, while it's not its turn to move")}:{valid:!0,code:0,message:"OK"}},vr=function(n,r,t){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Q";if(!n||"String"!==n.constructor.name)return!1;if(!sr(n,r,t))return!1;var i=T(n),u=i.fenArray,o=i.turn,a=i.castling,c=i.enPassant,f=i.halfMoveClock,s=i.fullMoveNumber;r=X(r),t=X(t);var p=[u[r],u[t]],h=p[0],v=p[1],b=l(u);b[r]="0","P"===h&&7===G(t)?b[t]=e?e.toUpperCase():"Q":"p"===h&&0===G(t)?b[t]=e?e.toLowerCase():"q":b[t]=h,"P"===h&&z(t)===c?b[t-8]="0":"p"===h&&z(t)===c&&(b[t+8]="0"),"K"===h&&4===r&&6===t?(b[5]="R",b[7]="0"):"K"===h&&4===r&&2===t?(b[3]="R",b[0]="0"):"k"===h&&60===r&&62===t?(b[61]="r",b[63]="0"):"k"===h&&60===r&&58===t&&(b[59]="r",b[56]="0"),4===r&&(a=a.replace("K","").replace("Q","")),60===r&&(a=a.replace("k","").replace("q","")),7===r&&(a=a.replace("K","")),0===r&&(a=a.replace("Q","")),63===r&&(a=a.replace("k","")),56===r&&(a=a.replace("q","")),""===a&&(a="-"),o="w"===o?"b":"w",c="P"===h&&2===Qn(r,t,"w")?z(t-8):"p"===h&&2===Qn(r,t,"b")?z(t+8):"-",f="P"!==h&&"p"!==h&&"0"===v?parseInt(f)+1:"0",s="w"===o?parseInt(s)+1:s;var g=$(b);return"".concat(g," ").concat(o," ").concat(a," ").concat(c," ").concat(f," ").concat(s)},br=function(n){return n.replace(/[+#=x]/g,"")},gr=function(n,r){var t,e,u,o,a=T(n);if("0-0"===(r=br(r))||"O-O"===r)return"w"===a.turn?{sqFrom:4,sqTo:6,promotion:null}:{sqFrom:60,sqTo:62,promotion:null};if("0-0-0"===r||"O-O-O"===r)return"w"===a.turn?{sqFrom:4,sqTo:2,promotion:null}:{sqFrom:60,sqTo:58,promotion:null};if(/[a-h]/.test(r[0])){var c=V(r[0]);return e=/[1-8]/.test(r[1])?X(r.slice(0,2)):X(r.slice(1,3)),t=(o="w"===a.turn?xn(n):Bn(n)).find(function(r){return H(r)===c&&sr(n,r,e)})||-1,u=/[QNRBqnrb]/.test(r[r.length-1])?r[r.length-1]:null,{sqFrom:t,sqTo:e,promotion:u}}if(rn(r[0])&&"P"!==r[0]){switch(u=null,r[0]){case"N":o="w"===a.turn?Ln(n):Fn(n);break;case"B":o="w"===a.turn?En(n):Nn(n);break;case"R":o="w"===a.turn?In(n):Mn(n);break;case"Q":o="w"===a.turn?Dn(n):jn(n);break;case"K":o="w"===a.turn?$n(n):Tn(n)}if(e=W(r.slice(r.length-2,r.length)),5===r.length)t=W(r.slice(1,3));else if(4===r.length){var f=r[1],s=i(/[1-8]/.test(f)?[G,parseInt(f)-1]:[H,V(f)],2),l=s[0],p=s[1];t=o.find(function(r){return l(r)===p&&sr(n,r,e)})||-1}else{var h=o.filter(function(r){return sr(n,r,e)});switch(h.length){case 0:t=-1;break;case 1:t=h[0];break;default:var v=h.filter(function(r){var t=vr(n,r,e,null);return t&&hr(t).valid});t=1===v.length?v[0]:-1}}return{sqFrom:t,sqTo:e,promotion:u}}return{sqFrom:-1,sqTo:-1,promotion:null}},Pr=function(n,r,t,e){var i=T(n),u=i.fenArray,o=i.turn,a=i.enPassant;i.castling;r=X(r),t=X(t);var c,f,s,l,p,h,v=[u[r],u[t]],b=v[0],g=v[1];if(tn(b))return null;var P=vr(n,r,t,e);if(!P||!hr(P).valid)return null;if(h=or(P)?"#":ur(P)?"+":"","K"===b&&4===r){if(6===t)return"O-O".concat(h);if(2===t)return"O-O-O".concat(h)}if("k"===b&&60===r){if(62===t)return"O-O".concat(h);if(58===t)return"O-O-O".concat(h)}if(s=tn(g)?/[Pp]/.test(b)&&X(a)===t?"x":"":"x",l=z(t),/[Pp]/.test(b))c=fn(r,t)?"":J(H(r)),f="",p=7===G(t)&&"P"===b||7===G(t)&&"P"===b?"=".concat(e?e.toUpperCase():"Q"):"";else{c=b.toUpperCase(),p="";var w=er(n,t,o).filter(function(n){return u[n]===b&&n!==r});if(0===w.length)f="";else{var d=w.filter(function(r){var e=vr(n,r,t,null);return e&&hr(e).valid});f=d.length>1?z(r):1===d.length?fn(r,d[0])?(G(r)+1).toString():J(H(r)):""}}return"".concat(c).concat(f).concat(s).concat(l).concat(p).concat(h)},wr=function(n){return n.split(/\s+/).slice(0,4).join(" ")},dr=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;r(this,n),this.reset(t)}return e(n,[{key:"reset",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;this.__fens__=[n],this.__sans__=[""]}},{key:"move",value:function(){var n,r,t,e=T(this.fen);switch(arguments.length){case 0:return!1;case 1:var i=gr(this.fen,arguments.length<=0?void 0:arguments[0]);n=i.sqFrom,r=i.sqTo,t=i.promotion;break;default:n=X(arguments.length<=0?void 0:arguments[0]),r=X(arguments.length<=1?void 0:arguments[1]),t=arguments.length<=2?void 0:arguments[2]}if(rn(e.fenArray[n])&&"b"===e.turn||nn(e.fenArray[n])&&"w"===e.turn)return!1;var u=vr(this.fen,n,r,t);if(!u)return!1;if(!hr(u).valid)return!1;var o=Pr(this.fen,n,r,t),a=e.fenArray,c=e.turn,s=e.enPassant,p=[a[n],a[r]],h=p[0],v=p[1],b={san:o,piece:h,color:c,from:z(n),to:z(r)};tn(v)||(b=f({},b,{captured:v}));var g=/[Pp]/.test(h)&&r===W(s),P=/[Pp]/.test(h)&&2===on(n,r),w="p"===h&&0===G(r)||"P"===h&&7===G(r);w&&(b=f({},b,{promotion:t?t.toUpperCase():"Q"}));var d="";return"K"===h&&4===n&&6===r||"k"===h&&60===n&&62===r?d+="k":("K"===h&&4===n&&2===r||"k"===h&&60===n&&58===r)&&(d+="q"),w?d+="p":P&&(d+="b"),d+=g?"e":b.captured?"c":"n",this.__sans__=[].concat(l(this.__sans__),[f({},b,{flags:d})]),this.__fens__=[].concat(l(this.__fens__),[u]),setTimeout(function(){},0),this}},{key:"history",value:function(n){return n&&n.verbose?this.__sans__.slice(1):this.__sans__.slice(1).map(function(n){return n.san})}},{key:"moves",value:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r?pr(this.fen).filter(function(n){return n.from===X(r)}).map(function(r){return Pr(n.fen,r.from,r.to,"Q")}):pr(this.fen).map(function(r){return Pr(n.fen,r.from,r.to,"Q")})}},{key:"in_threefold_repetition",value:function(){var n=wr(this.fen);return b(this.fens().map(wr))[n]>=3}},{key:"get",value:function(n){return T(this.fen).fenArray[X(n)]}},{key:"fens",value:function(){return this.__fens__}},{key:"undo",value:function(){return!(this.__fens__.length<2)&&(this.__fens__.splice(this.__fens__.length-1,this.__fens__.length),this.__sans__.splice(this.__sans__.length-1,this.__sans__.length),this)}},{key:"toString",value:function(){return this.fen}},{key:"isCheck",get:function(){return ur(this.fen)}},{key:"isCheckMate",get:function(){return or(this.fen)}},{key:"isStaleMate",get:function(){return ar(this.fen)}},{key:"fen",get:function(){return this.__fens__[this.__fens__.length-1]}}]),n}(),kr={groupArray:b,makeSet:g,range:P,sanRegExp:d,pgnTagLineRegExp:k,defaultFen:y,sicilianFen:m,scandinavianFen:_,oddFrenchFen:q,mateLocoFen:K,mateAyudadoFen:R,prePastorFen:O,pastorFen:Q,makeFenComparable:wr,fen2obj:T,obj2fen:x,expandFen:L,compressFen:E,fen2array:I,defaultFenArray:D,array2fenString:$,computedFenString:U,row:G,col:H,sq2rowcol:Y,rowcol2sq:Z,col2letter:J,letter2col:V,sq2san:z,san2sq:W,isBlackFigure:nn,isWhiteFigure:rn,isEmptyFigure:tn,isDarkSquare:en,isLightSquare:un,difRow:on,difCol:an,isSameRow:cn,isSameCol:fn,isDiagonal:sn,isAntiDiagonal:ln,isKingReach:hn,path:wn,innerPath:dn,isForward:kn,kingSq:mn,isClearPath:_n,isPawnMove:Qn,isPawnAttack:Sn,isCastling:An,isKingMove:On,isBishopMove:qn,isRookMove:Kn,isQueenMove:Rn,army:Cn,wBishops:En,wKings:$n,wKnights:Ln,wPawns:xn,wQueens:Dn,wRooks:In,bBishops:Nn,bKings:Tn,bKnights:Fn,bPawns:Bn,bQueens:jn,bRooks:Mn,wArmy:Un,bArmy:zn,wAttackers:Wn,bAttackers:Xn,wAttacks:Gn,bAttacks:Hn,wPMoves:Jn,bPMoves:Vn,isFriend:Yn,isFoe:Zn,getFigure:nr,getFigures:rr,attacksFromSq:tr,attacksOnSq:er,checksTo:ir,isCheck:ur,isCheckMate:or,isStaleMate:ar,canKingMove:fr,canMove:sr,candidateMoves:lr,availableMoves:pr,validateFen:hr,tryMove:vr,stripSan:br,args2san:Pr,san2args:gr,Chess:dr},yr=kr;"undefined"!=typeof window&&(window.Chess=dr),void 0!==n&&(n.Chess=dr);try{if("undefined"!=typeof module)module.exports=dr;else var mr=dr}catch(_r){console.log("EXPORT (2) ERROR: ".concat(_r.message))}
},{}]},{},["Focm"], null)
//# sourceMappingURL=/index.js.map